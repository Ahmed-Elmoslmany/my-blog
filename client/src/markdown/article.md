# ماهو الـ Middleware؟
مفهوم من أهم المفاهيم في أغلب لغات البرمجة مع اختلاف المسمى هو الـ Middleware

### حسناً ماذا يعني الـ Middleware؟
تخيل معي هذا المثال: أحمد دخل اختبار تابع لأحد الدورات الأونلاين على Google forms، جاوب أحمد على الأسئلة وقام بأرسال اجاباته  ثم ظهرت له نتيجة الأختبار،
هل لاحظت شيئًا؟، تلك الفترة القصيرة جدا ما بين ارسال أحمد لإجاباته وظهور النتيجة، هل تمت على الفور؟! في الحقيقة **لا** بل كان هناك بعض الاجراءات قبل ارسال النتيجة لأحمد، مثل التحقق من إدخال أحمد للـ Gmail الخاص به وهكذا   

يُمكن تلخيص المثال السابق بأن الـ Middleware هو عبارة عن وسيط يتحقق من بعض الأشياء بعد إرسال المستخدم لبيانات معينة وقبل  الرد على المستخدم بناءً على تلك البيانات.

ما سبق كان شرح بسيط للمفهوم العام .. ومن وجهة نظر اخرى فإن الـ Middleware عبارة عن الكود الذي يُنفذ بين إرسال الطلب `Request` وتلقي الرد `Resonse`  وهذا هو التعريف المشهور في عالم الـ `Backend` وهو موضوعنا اليوم.


### مثال أكثر تفصيلاً
عندما تقوم بشراء شئ ما اونلاين، هل يتم تنفيذ طلبك على الفور؟ كلا بل يتم التحقق من بعض الأمور الهامة مثل:
-هل قُمت بتسجيل الدخول على الموقع؟
-هل قُمت بإدخال معلومات مهمة مثل عنوانك ورقم هاتفك للتواصل معك عند توصيل طلبك
-وأشياء اخرى كثيرة
 كل هذه الأشياء يمكن التحقق منها بإستخدام الـ Middlware، والكود التالي يوضح الأمر

```js
const preChecksBeforeOrdering = (req, res, next) => {
	// نتحقق هنا هل المتسخدم سجل الدخول أم لا
	if(!isLoggedIn(req.body.id)) {
		return next(new Error("رجاءً قُم بتسجيل الدخول قبل طلب المُنتج"))
	}
	.
	.
	.
	// بقية كود التحقق قبل تنفيذ الطلب
	next()
}
```

يُمكنك بالطبع كتابة أكثر من Middleware، وهذه الرسمة البسيطة توضح الأمر

```bash
الرد <-- Middleware <-- Middleware <-- Middleware <-- الطلب
```

### أنواع الـ Middleware وأستخدامته
أنواع الـ Middleware كثيرة فمنها ماهو جاهز كـ Package، ويُمكنك بالطبع كتابة الـ Middlware الخاص بك كما فعلنا في المثال السابق.

أستخدامات الـ Middleware مُتعددة منها مثلاً
- يُمكنك أستخدامها في عملية المُصادقة `Authentication`
- يُمكنك أيضًا أستخدامها في التحقق من صحة البيانات `Validation`
- وأشياء اخرى كثيرة، لعلنا نُفصل في هذه المواضيع قريبًا.